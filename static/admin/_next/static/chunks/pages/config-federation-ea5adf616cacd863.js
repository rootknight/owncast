(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{50291:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/config-federation",function(){return t(6898)}])},10063:function(e,n,t){"use strict";t.d(n,{Q:function(){return c},Z:function(){return u}});var a=t(85893),i=t(67294),s=t(44068),r=t(20550),l=t(48419),o=s.Z.Title,c="#5a67d8";function u(e){var n=(0,i.useState)(""),t=n[0],s=n[1],u=e.title,d=e.description,h=e.placeholder,f=e.maxLength,m=e.values,v=e.handleDeleteIndex,g=e.handleCreateString,p=e.submitStatus;return(0,a.jsxs)("div",{className:"edit-string-array-container",children:[(0,a.jsx)(o,{level:3,className:"section-title",children:u}),(0,a.jsx)("p",{className:"description",children:d}),(0,a.jsx)("div",{className:"edit-current-strings",children:m.map((function(e,n){return(0,a.jsx)(r.Z,{closable:!0,onClose:function(){v(n)},color:c,children:e},"tag-".concat(e,"-").concat(n))}))}),(0,a.jsx)("div",{className:"add-new-string-section",children:(0,a.jsx)(l.ZP,{fieldName:"string-input",value:t,onChange:function(e){var n=e.value;s(n)},onPressEnter:function(){var e=t.trim();g(e),s("")},maxLength:f,placeholder:h,status:p})})]})}u.defaultProps={maxLength:50,description:null,submitStatus:null}},15976:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var a=t(28520),i=t.n(a),s=t(85893),r=t(67294),l=t(94594),o=t(83200),c=t(78464),u=t(25964),d=t(35159);function h(e,n,t,a,i,s,r){try{var l=e[s](r),o=l.value}catch(c){return void t(c)}l.done?n(o):Promise.resolve(o).then(a,i)}function f(e){var n,t=(0,r.useState)(null),a=t[0],f=t[1],m=null,v=((0,r.useContext)(d.aC)||{}).setFieldInConfigState,g=e.apiPath,p=e.checked,b=e.reversed,x=void 0!==b&&b,w=e.configPath,j=void 0===w?"":w,k=e.disabled,y=void 0!==k&&k,P=e.fieldName,N=e.label,C=e.tip,S=e.useSubmit,Z=e.onChange,E=function(){f(null),clearTimeout(m),m=null},O=(n=i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=6;break}return f((0,o.kg)(o.Jk)),t=x?!n:n,e.next=5,(0,u.Si)({apiPath:g,data:{value:t},onSuccess:function(){v({fieldName:P,value:t,path:j}),f((0,o.kg)(o.zv))},onError:function(e){f((0,o.kg)(o.Un,"There was an error: ".concat(e)))}});case 5:m=setTimeout(E,u.sI);case 6:Z&&Z(n);case 7:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(a,i){var s=n.apply(e,t);function r(e){h(s,a,i,r,l,"next",e)}function l(e){h(s,a,i,r,l,"throw",e)}r(void 0)}))}),F=null!==a&&a.type===o.Jk;return(0,s.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[N&&(0,s.jsx)("div",{className:"label-side",children:(0,s.jsx)("span",{className:"formfield-label",children:N})}),(0,s.jsxs)("div",{className:"input-side",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)(l.Z,{className:"switch field-".concat(P),loading:F,onChange:O,defaultChecked:p,checked:p,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:y}),(0,s.jsx)(c.Z,{status:a})]}),(0,s.jsx)("p",{className:"field-tip",children:C})]})]})}f.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},6898:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var a=t(85893),i=t(56516),s=t(71577),r=t(44068),l=t(25968),o=t(6226),c=t(67294),u=t(45697),d=t.n(u),h=t(48419),f=t(50197),m=t(15976),v=t(10063),g=t(25964),p=t(35159),b=t(83200);function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){x(e,n,t[n])}))}return e}function j(e){var n=e.cancelPressed,t=e.okPressed;return(0,a.jsxs)(i.Z,{width:800,title:"Enable Social Features",visible:!0,onCancel:n,footer:(0,a.jsx)(s.Z,{onClick:t,children:"I Understand."}),children:[(0,a.jsx)(r.Z.Title,{level:3,children:"What is Federation?"}),(0,a.jsxs)(r.Z.Paragraph,{children:["Enabling social features allows your Owncast server to be a part of the greater"," ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",rel:"noopener noreferrer",target:"_blank",children:"Fediverse"}),", allowing people to be notified when you go live and for you to send posts from Owncast to your followers. It can also surface actions taken on the Fediverse such as following, sharing or liking to show who is engaging with your stream."]}),(0,a.jsx)(r.Z.Title,{level:3,children:"Understand the following"}),(0,a.jsx)(r.Z.Paragraph,{children:"Due to other servers interacting with yours there are some things to keep in mind."}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"You must always host your Owncast server with SSL using a https url."}),(0,a.jsx)("li",{children:"If you ever change your server name or Fediverse username you will be seen as a completely different user on the Fediverse, and the old user will disappear. It is best to never change these once you set them."}),(0,a.jsx)("li",{children:"Turning on Private Federation mode will require you to manually approve each follower."})]})]})}function k(){var e=function(){E(null)},n=function(){try{(0,g.Si)({apiPath:g.pE,data:{value:s.blockedDomains},onSuccess:function(){C({fieldName:"forbiddenUsernames",value:s.forbiddenUsernames}),E(b.zv),setTimeout(e,g.sI)},onError:function(n){E((0,b.kg)(b.Un,n)),setTimeout(e,g.sI)}})}catch(n){console.error(n),E(b.Un)}},t=r.Z.Title,i=(0,c.useState)(null),s=i[0],u=i[1],d=(0,c.useState)(!1),k=d[0],y=d[1],P=(0,c.useContext)(p.aC)||{},N=P.serverConfig,C=P.setFieldInConfigState,S=(0,c.useState)(null),Z=S[0],E=S[1],O=N.federation,F=N.yp,U=O.enabled,T=O.isPrivate,D=O.username,_=O.goLiveMessage,I=O.showEngagement,L=O.blockedDomains,R=F.instanceUrl,q=function(e){var n=e.fieldName,t=e.value;u(w({},s,x({},n,t)))};if((0,c.useEffect)((function(){u({enabled:U,isPrivate:T,username:D,goLiveMessage:_,showEngagement:I,blockedDomains:L,instanceUrl:F.instanceUrl})}),[N,F]),!s)return null;var M=""!==R,V=R.startsWith("https://");return(0,a.jsxs)("div",{children:[(0,a.jsx)(t,{children:"Configure Social Features"}),"TODO: Explain what the Fediverse is here and talk about what happens if you were to enable this feature.",(0,a.jsxs)(l.Z,{children:[(0,a.jsxs)(o.Z,{span:15,className:"form-module",style:{marginRight:"15px"},children:[(0,a.jsx)(m.Z,w({fieldName:"enabled",onChange:function(e){e?y(!0):u({enabled:!1})}},g.Kl,{checked:s.enabled,disabled:!M||!V})),(0,a.jsx)(f.ZP,w({fieldName:"instanceUrl"},g.yi,{value:s.instanceUrl,initialValue:F.instanceUrl,type:h.xA,onChange:q,onSubmit:function(){var e=""!==s.instanceUrl,n=s.instanceUrl.startsWith("https://");e&&n||((0,g.Si)({apiPath:g.Kl.apiPath,data:{value:!1}}),u({enabled:!1}))}})),(0,a.jsx)(m.Z,w({fieldName:"isPrivate"},g.LC,{checked:s.isPrivate})),(0,a.jsx)(f.ZP,w({required:!0,fieldName:"username"},g.Xc,{value:s.username,initialValue:D,onChange:q})),(0,a.jsx)(f.ZP,w({fieldName:"goLiveMessage"},g.BF,{type:h.Sk,value:s.goLiveMessage,initialValue:_,onChange:q})),(0,a.jsx)(m.Z,w({fieldName:"showEngagement"},g.FE,{checked:s.showEngagement}))]}),(0,a.jsx)(o.Z,{span:8,className:"form-module",children:(0,a.jsx)(v.Z,{title:g.dR.label,placeholder:g.dR.placeholder,description:g.dR.tip,values:s.blockedDomains,handleDeleteIndex:function(e){s.blockedDomains.splice(e,1),n()},handleCreateString:function(e){var t;try{t=new URL(e).host}catch(a){t=e}s.blockedDomains.push(t),q({fieldName:"blockedDomains",value:s.blockedDomains}),n()},submitStatus:(0,b.kg)(Z)})})]}),k&&(0,a.jsx)(j,{cancelPressed:function(){y(!1),u({enabled:!1})},okPressed:function(){y(!1),u({enabled:!0})}})]})}j.propTypes={cancelPressed:d().func.isRequired,okPressed:d().func.isRequired}}},function(e){e.O(0,[829,774,888,179],(function(){return n=50291,e(e.s=n);var n}));var n=e.O();_N_E=n}]);